name: Testing

on: [push]

jobs:
  chat:
    runs-on: ubuntu-latest
    container: docker

    services:
      mongo:
        image: mongo
        ports:
          - 27017:27017

    steps:
      - run: /usr/bin/telnet 127.0.0.1 27017
#       - run: docker run -p 3000:80  -e "MONGO_URL=mongodb://localhost:27017" -e "ROOT_URL=http://webapp:3000" tanutapi/simple-meteor-chat -d
#       - run: telnet localhost 3000

#   test:
#     runs-on: ubuntu-latest
    
#     services:
#       mongo:
#         image: mongo
#         ports: 
#           - 27017:27017
#       webapp:
#         image: tanutapi/simple-meteor-chat
#         ports:
#           - 3000:80
#         env:
#           MONGO_URL: mongodb://mongo:27017
#           ROOT_URL: http://webapp:3000
          
#     steps:
#       - run: sudo apt-get update
#       - run: sudo apt-get install apt-transport-https -y
#       - run: sudo sh -c 'wget -qO- https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -'
#       - run: sudo sh -c 'wget -qO- https://storage.googleapis.com/download.dartlang.org/linux/debian/dart_stable.list > /etc/apt/sources.list.d/dart_stable.list'
#       - run: sudo apt-get update
#       - name: Install dart
#         run: sudo apt-get install dart -y
#       - run: export PATH="$PATH:/usr/lib/dart/bin"
#       - uses: actions/checkout@v1
#       - name: Install dependencies
#         run: PATH="$PATH:/usr/lib/dart/bin" pub get
#       - name: Run tests
#         run: PATH="$PATH:/usr/lib/dart/bin" pub run test -p chrome
